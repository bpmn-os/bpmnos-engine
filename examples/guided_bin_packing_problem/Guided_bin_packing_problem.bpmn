<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bpmnos="https://bpmnos.telematique.eu" id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"><bpmn2:collaboration id="Bin_packing_problem"><bpmn2:documentation>Given a set of items, each having a specifed size, and a set of bins each having a specified capacity, the *Bin packing problem* can be described as the problem of finding the minimal number of bins required to include all items such that the total size of all items associated to a bin does not exceed the capacity of the bin.

The model contains guidance on the allocation of items to bins. </bpmn2:documentation><bpmn2:extensionElements><bpmnos:attributes><bpmnos:attribute id="Items" name="items" type="integer" /><bpmnos:attribute id="ItemRequests" name="item_requests := 0" type="integer" /><bpmnos:attribute id="Bins" name="bins" type="integer" /><bpmnos:attribute id="AvailableBins" name="available_bins := 0" type="integer" /><bpmnos:attribute id="ItemsIncluded" name="items_included := 0" type="integer" /><bpmnos:attribute id="Blocker" name="blocker := false" type="boolean" /></bpmnos:attributes></bpmn2:extensionElements><bpmn2:participant id="Participant_1c07lhk" name="Item process" processRef="ItemProcess" /><bpmn2:participant id="Participant_0gkimz7" name="Bin process" processRef="BinProcess" /></bpmn2:collaboration><bpmn2:process id="ItemProcess" isExecutable="true"><bpmn2:extensionElements><bpmnos:status><bpmnos:attributes><bpmnos:attribute id="Timestamp" name="timestamp" type="decimal" /><bpmnos:attribute id="Size" name="size" type="decimal" /></bpmnos:attributes></bpmnos:status></bpmn2:extensionElements><bpmn2:startEvent id="StartEventItem"><bpmn2:outgoing>Flow_1qgy5y7</bpmn2:outgoing></bpmn2:startEvent><bpmn2:sequenceFlow id="Flow_1qgy5y7" sourceRef="StartEventItem" targetRef="RequestActivity" /><bpmn2:endEvent id="EndEventItem"><bpmn2:incoming>Flow_1aezece</bpmn2:incoming></bpmn2:endEvent><bpmn2:sequenceFlow id="Flow_1aezece" sourceRef="RequestActivity" targetRef="EndEventItem" /><bpmn2:sendTask id="RequestActivity" name="Request"><bpmn2:extensionElements><bpmnos:messages><bpmnos:message name="Request"><bpmnos:content key="Item" attribute="instance" /><bpmnos:content key="Size" attribute="size" /></bpmnos:message></bpmnos:messages><bpmnos:status><bpmnos:operators><bpmnos:operator id="Operator_0pjma63" expression="item_requests += 1" /></bpmnos:operators></bpmnos:status></bpmn2:extensionElements><bpmn2:incoming>Flow_1qgy5y7</bpmn2:incoming><bpmn2:outgoing>Flow_1aezece</bpmn2:outgoing></bpmn2:sendTask><bpmn2:dataObject id="DataObject_1xt50y3"><bpmn2:extensionElements><bpmnos:attributes><bpmnos:attribute id="Instance" name="instance" type="string" /></bpmnos:attributes></bpmn2:extensionElements></bpmn2:dataObject></bpmn2:process><bpmn2:process id="BinProcess" isExecutable="true"><bpmn2:extensionElements><bpmnos:status><bpmnos:attributes><bpmnos:attribute id="Timestamp" name="timestamp" type="decimal" /></bpmnos:attributes><bpmnos:restrictions><bpmnos:restriction id="Restriction_3br81vk" expression="total_size &#60;= capacity" /></bpmnos:restrictions></bpmnos:status></bpmn2:extensionElements><bpmn2:subProcess id="EventSubProcess" triggeredByEvent="true"><bpmn2:extensionElements><bpmnos:status><bpmnos:attributes><bpmnos:attribute id="Item" name="item" type="string" /><bpmnos:attribute id="Size" name="size" type="decimal" /></bpmnos:attributes><bpmnos:restrictions><bpmnos:restriction id="RestrictionBlocker" scope="entry" expression="blocker == false" /></bpmnos:restrictions><bpmnos:operators><bpmnos:operator id="OperatorBlocker" expression="blocker := true" /></bpmnos:operators></bpmnos:status></bpmn2:extensionElements><bpmn2:sequenceFlow id="Flow_04nmpfp" sourceRef="CatchRequestMessage" targetRef="AdHocSubProcess" /><bpmn2:adHocSubProcess id="AdHocSubProcess" ordering="Sequential"><bpmn2:extensionElements><bpmnos:status /></bpmn2:extensionElements><bpmn2:incoming>Flow_04nmpfp</bpmn2:incoming><bpmn2:outgoing>Flow_0d3x89n</bpmn2:outgoing><bpmn2:task id="IncludeItemActivity" name="Include item"><bpmn2:extensionElements><bpmnos:status><bpmnos:operators><bpmnos:operator id="OperatorUsed" expression="used := true" /><bpmnos:operator id="OperatorTotalSize" expression="total_size += size" /><bpmnos:operator id="OperatorItemsIncluded" expression="items_included += 1" /><bpmnos:operator id="OperatorUnblock" expression="blocker := false" /></bpmnos:operators></bpmnos:status></bpmn2:extensionElements></bpmn2:task></bpmn2:adHocSubProcess><bpmn2:endEvent id="EndEventSubProcess"><bpmn2:incoming>Flow_0d3x89n</bpmn2:incoming></bpmn2:endEvent><bpmn2:sequenceFlow id="Flow_0d3x89n" sourceRef="AdHocSubProcess" targetRef="EndEventSubProcess" /><bpmn2:startEvent id="CatchRequestMessage" name="Request" isInterrupting="false"><bpmn2:documentation>The guidance for the allocation of items to bins requires that all items have sent their request, all bins are available, and that the inclusion of an item will not exceed the capacity. Allocations are made in an order that the item which minimise the residual capacity is chosen first.</bpmn2:documentation><bpmn2:extensionElements><bpmnos:message name="Request"><bpmnos:content key="Item" attribute="item" /><bpmnos:content key="Size" attribute="size" /></bpmnos:message><bpmnos:guidance type="message"><bpmnos:attributes><bpmnos:attribute id="Residual" name="residual" type="decimal" objective="minimize" weight="1" /></bpmnos:attributes><bpmnos:restrictions><bpmnos:restriction id="Restriction_0ve1mi3" scope="exit" expression="item_requests == items" /><bpmnos:restriction id="Restriction_247eq94" scope="exit" expression="available_bins == bins" /><bpmnos:restriction id="RestrictionSize" scope="exit" expression="total_size + size &#60;= capacity" /><bpmnos:restriction id="RestrictionBlocker" expression="blocker == false" /></bpmnos:restrictions><bpmnos:operators><bpmnos:operator id="Operator_2oajb1v" expression="residual := capacity - total_size - size" type="decimal" /></bpmnos:operators></bpmnos:guidance></bpmn2:extensionElements><bpmn2:outgoing>Flow_04nmpfp</bpmn2:outgoing><bpmn2:messageEventDefinition id="MessageEventDefinition_1xfumwd" /></bpmn2:startEvent></bpmn2:subProcess><bpmn2:dataObject id="DataObject_2xt50y3"><bpmn2:extensionElements><bpmnos:attributes><bpmnos:attribute id="Instance" name="instance" type="string" /></bpmnos:attributes></bpmn2:extensionElements></bpmn2:dataObject><bpmn2:endEvent id="EndEventBin"><bpmn2:incoming>Flow_1q2xx4t</bpmn2:incoming></bpmn2:endEvent><bpmn2:task id="WaitActivity" name="Wait for requests"><bpmn2:extensionElements><bpmnos:status><bpmnos:restrictions><bpmnos:restriction id="Restriction_339o4h3" scope="exit" expression="items_included == items" /></bpmnos:restrictions><bpmnos:operators><bpmnos:operator id="Operator_0oi8qea" expression="available_bins += 1" /></bpmnos:operators></bpmnos:status></bpmn2:extensionElements><bpmn2:incoming>Flow_1rghjse</bpmn2:incoming><bpmn2:outgoing>Flow_1q2xx4t</bpmn2:outgoing></bpmn2:task><bpmn2:startEvent id="StartEvent"><bpmn2:outgoing>Flow_1rghjse</bpmn2:outgoing></bpmn2:startEvent><bpmn2:sequenceFlow id="Flow_1q2xx4t" sourceRef="WaitActivity" targetRef="EndEventBin" /><bpmn2:sequenceFlow id="Flow_1rghjse" sourceRef="StartEvent" targetRef="WaitActivity" /><bpmn2:dataObjectReference id="DataObjectReference_04cxu4w" dataObjectRef="DataObject_1pee096" /><bpmn2:dataObject id="DataObject_1pee096"><bpmn2:extensionElements><bpmnos:attributes><bpmnos:attribute id="Capacity" name="capacity" type="decimal" /><bpmnos:attribute id="TotalSize" name="total_size := 0" type="decimal" /><bpmnos:attribute id="Used" name="used := false" type="boolean" objective="minimize" weight="1" /></bpmnos:attributes></bpmn2:extensionElements></bpmn2:dataObject><bpmn2:performer name="Sequential" /></bpmn2:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Bin_packing_problem"><bpmndi:BPMNShape id="Participant_1c07lhk_di" bpmnElement="Participant_1c07lhk" isHorizontal="true"><dc:Bounds x="330" y="133" width="560" height="250" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEventItem"><dc:Bounds x="432" y="240" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_133ovn6_di" bpmnElement="EndEventItem"><dc:Bounds x="672" y="240" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1s4av1k_di" bpmnElement="RequestActivity"><dc:Bounds x="520" y="218" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_1qgy5y7_di" bpmnElement="Flow_1qgy5y7"><di:waypoint x="468" y="258" /><di:waypoint x="520" y="258" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1aezece_di" bpmnElement="Flow_1aezece"><di:waypoint x="620" y="258" /><di:waypoint x="672" y="258" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Participant_0gkimz7_di" bpmnElement="Participant_0gkimz7" isHorizontal="true"><dc:Bounds x="330" y="420" width="560" height="390" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1vkdqzf_di" bpmnElement="EventSubProcess" isExpanded="true"><dc:Bounds x="400" y="570" width="430" height="220" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1xho7n8_di" bpmnElement="AdHocSubProcess" isExpanded="true"><dc:Bounds x="511" y="600" width="179" height="150" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0m9f4ep_di" bpmnElement="IncludeItemActivity"><dc:Bounds x="550" y="630" width="100" height="80" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0tsfjap_di" bpmnElement="EndEventSubProcess"><dc:Bounds x="752" y="652" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0bh2gup_di" bpmnElement="CatchRequestMessage"><dc:Bounds x="432" y="649" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="430" y="692" width="41" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_04nmpfp_di" bpmnElement="Flow_04nmpfp"><di:waypoint x="468" y="667" /><di:waypoint x="511" y="667" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0d3x89n_di" bpmnElement="Flow_0d3x89n"><di:waypoint x="690" y="670" /><di:waypoint x="752" y="670" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_03ls64p_di" bpmnElement="EndEventBin"><dc:Bounds x="754" y="478" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1lpi0t4_di" bpmnElement="WaitActivity"><dc:Bounds x="602" y="456" width="100" height="80" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_080iwtd_di" bpmnElement="StartEvent"><dc:Bounds x="514" y="478" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DataObjectReference_04cxu4w_di" bpmnElement="DataObjectReference_04cxu4w"><dc:Bounds x="412" y="471" width="36" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_1q2xx4t_di" bpmnElement="Flow_1q2xx4t"><di:waypoint x="702" y="496" /><di:waypoint x="754" y="496" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rghjse_di" bpmnElement="Flow_1rghjse"><di:waypoint x="550" y="496" /><di:waypoint x="602" y="496" /></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn2:definitions>
