<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bpmnos="https://bpmnos.telematique.eu" id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"><bpmn2:collaboration id="PickupDeliveryProblem"><bpmn2:extensionElements><bpmnos:attributes><bpmnos:attribute id="RequestsExpected" name="requests_expected" type="integer" /><bpmnos:attribute id="RequestsMade" name="requests_made" type="integer" value="0" /></bpmnos:attributes></bpmn2:extensionElements><bpmn2:participant id="Participant_0es96as" name="Customer process" processRef="CustomerProcess" /><bpmn2:participant id="Participant_0cq61mf" name="Vehicle process" processRef="VehicleProcess" /><bpmn2:messageFlow id="Flow_1xqd4id" sourceRef="RequestActivity" targetRef="StartEventRequest" /><bpmn2:messageFlow id="Flow_0jhyplx" sourceRef="ThrowPickupArrival" targetRef="CatchPickupArrival" /><bpmn2:messageFlow id="Flow_0et0fj0" sourceRef="ThrowShipmentLoaded" targetRef="CatchShipmentLoaded" /><bpmn2:messageFlow id="Flow_17g8ymw" sourceRef="CatchArrival" targetRef="CatchDestinationArrival" /><bpmn2:messageFlow id="Flow_0vyg7d2" sourceRef="ThrowShipmentUnloaded" targetRef="CatchShipmentUnloaded" /></bpmn2:collaboration><bpmn2:process id="CustomerProcess" isExecutable="true"><bpmn2:extensionElements><bpmnos:status><bpmnos:attributes><bpmnos:attribute id="Timestamp" name="timestamp" type="decimal" value="0" /><bpmnos:attribute id="Quantity" name="quantity" type="decimal" /><bpmnos:attribute id="PickupLocation" name="pickup_location" type="string" /><bpmnos:attribute id="EarliestPickup" name="earliest_pickup" type="decimal" /><bpmnos:attribute id="LatestPickup" name="latest_pickup" type="decimal" /><bpmnos:attribute id="PickupDuration" name="pickup_duration" type="decimal" /><bpmnos:attribute id="LatePickupPenalty" name="late_pickup_penalty" type="decimal" value="0" objective="none" /><bpmnos:attribute id="DeliveryLocation" name="delivery_location" type="string" /><bpmnos:attribute id="EarliestDelivery" name="earliest_delivery" type="decimal" /><bpmnos:attribute id="LatestDelivery" name="latest_delivery" type="decimal" /><bpmnos:attribute id="DeliveryDuration" name="delivery_duration" type="decimal" /><bpmnos:attribute id="LateDeliveryPenalty" name="late_delivery_penalty" type="decimal" value="0" objective="none" /></bpmnos:attributes></bpmnos:status></bpmn2:extensionElements><bpmn2:dataObject id="DataObject_0m5xj0p"><bpmn2:extensionElements><bpmnos:attributes><bpmnos:attribute id="Instance" name="instance" type="string" /></bpmnos:attributes></bpmn2:extensionElements></bpmn2:dataObject><bpmn2:startEvent id="StartEventCustomer"><bpmn2:outgoing>Flow_03kr6t6</bpmn2:outgoing></bpmn2:startEvent><bpmn2:sequenceFlow id="Flow_03kr6t6" sourceRef="StartEventCustomer" targetRef="RequestActivity" /><bpmn2:sequenceFlow id="Flow_0t8rjvh" sourceRef="RequestActivity" targetRef="CatchPickupArrival" /><bpmn2:sequenceFlow id="Flow_1jr4jt5" sourceRef="CatchPickupArrival" targetRef="PickupWaitEvent" /><bpmn2:sequenceFlow id="Flow_1xlu6cs" sourceRef="PickupWaitEvent" targetRef="LoadActivity" /><bpmn2:sequenceFlow id="Flow_1ipskfi" sourceRef="LoadActivity" targetRef="ThrowShipmentLoaded" /><bpmn2:sequenceFlow id="Flow_0cgpzkv" sourceRef="ThrowShipmentLoaded" targetRef="CatchDestinationArrival" /><bpmn2:sequenceFlow id="Flow_01onh2q" sourceRef="CatchDestinationArrival" targetRef="DeliveryWaitEvent" /><bpmn2:sequenceFlow id="Flow_1dvo3vz" sourceRef="DeliveryWaitEvent" targetRef="UnloadActivity" /><bpmn2:sequenceFlow id="Flow_1pp5drc" sourceRef="UnloadActivity" targetRef="ThrowShipmentUnloaded" /><bpmn2:sequenceFlow id="Flow_0t063eo" sourceRef="ThrowShipmentUnloaded" targetRef="EndEventCustomer" /><bpmn2:sendTask id="RequestActivity" name="Request"><bpmn2:extensionElements><bpmnos:messages><bpmnos:message name="Request"><bpmnos:content id="Content_2ri64h5" key="Quantity" attribute="quantity" /><bpmnos:content id="Content_2n0gnup" key="PickupLocation" attribute="pickup_location" /><bpmnos:content id="Content_3mkrqm0" key="DeliveryLocation" attribute="delivery_location" /><bpmnos:content id="Content_3mejc33" key="Customer" attribute="instance" /><bpmnos:content id="Content_2bc0ikv" key="PickupDuration" attribute="pickup_duration" /><bpmnos:content id="Content_1f0s2sa" key="EarliestPickup" attribute="earliest_pickup" /><bpmnos:content id="Content_25gc42j" key="LatestPickup" attribute="latest_pickup" /><bpmnos:content id="Content_0ptqgg7" key="DeliveryDuration" attribute="delivery_duration" /><bpmnos:content id="Content_2hotn1q" key="EarliestDelivery" attribute="earliest_delivery" /><bpmnos:content id="Content_26g9159" key="LatestDelivery" attribute="latest_delivery" /><bpmnos:content id="Content_3buiiak" key="LatePickupPenaty" attribute="late_pickup_penalty" /><bpmnos:content id="Content_1bd7e9r" key="LateDeliveryPenalty" attribute="late_delivery_penalty" /></bpmnos:message></bpmnos:messages></bpmn2:extensionElements><bpmn2:incoming>Flow_03kr6t6</bpmn2:incoming><bpmn2:outgoing>Flow_0t8rjvh</bpmn2:outgoing></bpmn2:sendTask><bpmn2:intermediateCatchEvent id="CatchPickupArrival" name="Arrival at&#10;pickup location"><bpmn2:extensionElements><bpmnos:message name="Arrival" /></bpmn2:extensionElements><bpmn2:incoming>Flow_0t8rjvh</bpmn2:incoming><bpmn2:outgoing>Flow_1jr4jt5</bpmn2:outgoing><bpmn2:messageEventDefinition id="MessageEventDefinition_19m3o4g" /></bpmn2:intermediateCatchEvent><bpmn2:intermediateCatchEvent id="PickupWaitEvent" name="Earliest&#10;pickup"><bpmn2:extensionElements><bpmnos:timer><bpmnos:parameter name="trigger" attribute="earliest_pickup" /></bpmnos:timer></bpmn2:extensionElements><bpmn2:incoming>Flow_1jr4jt5</bpmn2:incoming><bpmn2:outgoing>Flow_1xlu6cs</bpmn2:outgoing><bpmn2:timerEventDefinition id="TimerEventDefinition_1q4yh3w" /></bpmn2:intermediateCatchEvent><bpmn2:task id="LoadActivity" name="Load shipment"><bpmn2:extensionElements><bpmnos:status><bpmnos:operators><bpmnos:operator id="Operator_2q512kt" attribute="timestamp" type="expression"><bpmnos:parameter name="linear" value="timestamp + pickup_duration" /></bpmnos:operator></bpmnos:operators></bpmnos:status></bpmn2:extensionElements><bpmn2:incoming>Flow_1xlu6cs</bpmn2:incoming><bpmn2:outgoing>Flow_1ipskfi</bpmn2:outgoing></bpmn2:task><bpmn2:intermediateThrowEvent id="ThrowShipmentLoaded" name="Shipment&#10;loaded"><bpmn2:extensionElements><bpmnos:message name="Loaded" /></bpmn2:extensionElements><bpmn2:incoming>Flow_1ipskfi</bpmn2:incoming><bpmn2:outgoing>Flow_0cgpzkv</bpmn2:outgoing><bpmn2:messageEventDefinition id="MessageEventDefinition_0jmq7ql" /></bpmn2:intermediateThrowEvent><bpmn2:intermediateCatchEvent id="CatchDestinationArrival" name="Arrival at&#10;delivery location"><bpmn2:extensionElements><bpmnos:message name="Arrival" /></bpmn2:extensionElements><bpmn2:incoming>Flow_0cgpzkv</bpmn2:incoming><bpmn2:outgoing>Flow_01onh2q</bpmn2:outgoing><bpmn2:messageEventDefinition id="MessageEventDefinition_1wws5cy" /></bpmn2:intermediateCatchEvent><bpmn2:intermediateCatchEvent id="DeliveryWaitEvent" name="Earliest&#10;delivery"><bpmn2:extensionElements><bpmnos:timer><bpmnos:parameter name="trigger" attribute="earliest_delivery" /></bpmnos:timer></bpmn2:extensionElements><bpmn2:incoming>Flow_01onh2q</bpmn2:incoming><bpmn2:outgoing>Flow_1dvo3vz</bpmn2:outgoing><bpmn2:timerEventDefinition id="TimerEventDefinition_1e01rr5" /></bpmn2:intermediateCatchEvent><bpmn2:task id="UnloadActivity" name="Unload shipment"><bpmn2:extensionElements><bpmnos:status><bpmnos:operators><bpmnos:operator id="Operator_0ihu3a7" attribute="timestamp" type="expression"><bpmnos:parameter name="linear" value="timestamp + delivery_duration" /></bpmnos:operator></bpmnos:operators></bpmnos:status></bpmn2:extensionElements><bpmn2:incoming>Flow_1dvo3vz</bpmn2:incoming><bpmn2:outgoing>Flow_1pp5drc</bpmn2:outgoing></bpmn2:task><bpmn2:intermediateThrowEvent id="ThrowShipmentUnloaded" name="Shipment&#10;unloaded"><bpmn2:extensionElements><bpmnos:message name="Unloaded" /></bpmn2:extensionElements><bpmn2:incoming>Flow_1pp5drc</bpmn2:incoming><bpmn2:outgoing>Flow_0t063eo</bpmn2:outgoing><bpmn2:messageEventDefinition id="MessageEventDefinition_1ilugum" /></bpmn2:intermediateThrowEvent><bpmn2:endEvent id="EndEventCustomer"><bpmn2:incoming>Flow_0t063eo</bpmn2:incoming></bpmn2:endEvent></bpmn2:process><bpmn2:process id="VehicleProcess" isExecutable="true"><bpmn2:extensionElements><bpmnos:status><bpmnos:attributes><bpmnos:attribute id="Timestamp" name="timestamp" type="decimal" value="0" /></bpmnos:attributes><bpmnos:operators><bpmnos:operator id="Operator_3lgdmtf" attribute="location" type="assign"><bpmnos:parameter name="assign" attribute="depot" /></bpmnos:operator></bpmnos:operators></bpmnos:status></bpmn2:extensionElements><bpmn2:dataObject id="DataObject_0w1vb0b"><bpmn2:extensionElements><bpmnos:attributes><bpmnos:attribute id="Instance" name="instance" type="string" /></bpmnos:attributes></bpmn2:extensionElements></bpmn2:dataObject><bpmn2:subProcess id="EventSubProcess" name="Fulfill request" triggeredByEvent="true"><bpmn2:extensionElements><bpmnos:status><bpmnos:attributes><bpmnos:attribute id="Customer" name="customer" type="string" /><bpmnos:attribute id="Quantity" name="quantity" type="decimal" /><bpmnos:attribute id="PickupLocation" name="pickup_location" type="string" /><bpmnos:attribute id="EarliestPickup" name="earliest_pickup" type="decimal" /><bpmnos:attribute id="LatestPickup" name="latest_pickup" type="decimal" /><bpmnos:attribute id="PickupDuration" name="pickup_duration" type="decimal" /><bpmnos:attribute id="LatePickupPenalty" name="late_pickup_penalty" type="decimal" value="0" objective="none" /><bpmnos:attribute id="DeliveryLocation" name="delivery_location" type="string" /><bpmnos:attribute id="EarliestDelivery" name="earliest_delivery" type="decimal" /><bpmnos:attribute id="LatestDelivery" name="latest_delivery" type="decimal" /><bpmnos:attribute id="DeliveryDuration" name="delivery_duration" type="decimal" /><bpmnos:attribute id="LateDeliveryPenalty" name="late_delivery_penalty" type="decimal" value="0" objective="none" /></bpmnos:attributes><bpmnos:operators><bpmnos:operator id="Operator_15659lk" attribute="pending" type="expression"><bpmnos:parameter name="linear" value="pending + 1" /></bpmnos:operator><bpmnos:operator id="Operator_36m5puq" attribute="requests_made" type="expression"><bpmnos:parameter name="linear" value="requests_made + 1" /></bpmnos:operator></bpmnos:operators></bpmnos:status></bpmn2:extensionElements><bpmn2:startEvent id="StartEventRequest" name="Request" isInterrupting="false"><bpmn2:extensionElements><bpmnos:message name="Request"><bpmnos:content id="Content_1ri64h5" key="Quantity" attribute="quantity" /><bpmnos:content id="Content_1n0gnup" key="PickupLocation" attribute="pickup_location" /><bpmnos:content id="Content_2mkrqm0" key="DeliveryLocation" attribute="delivery_location" /><bpmnos:content id="Content_3mejc33" key="Customer" attribute="customer" /><bpmnos:content id="Content_0f0s2sa" key="EarliestPickup" attribute="earliest_pickup" /><bpmnos:content id="Content_15gc42j" key="LatestPickup" attribute="latest_pickup" /><bpmnos:content id="Content_9ptqgg7" key="DeliveryDuration" attribute="delivery_duration" /><bpmnos:content id="Content_1hotn1q" key="EarliestDelivery" attribute="earliest_delivery" /><bpmnos:content id="Content_16g9159" key="LatestDelivery" attribute="latest_delivery" /><bpmnos:content id="Content_2buiiak" key="LatePickupPenaty" attribute="late_pickup_penalty" /><bpmnos:content id="Content_0bd7e9r" key="LateDeliveryPenalty" attribute="late_delivery_penalty" /></bpmnos:message></bpmn2:extensionElements><bpmn2:outgoing>Flow_0540sk2</bpmn2:outgoing><bpmn2:messageEventDefinition id="MessageEventDefinition_1n9dvq0" /></bpmn2:startEvent><bpmn2:sequenceFlow id="Flow_0540sk2" sourceRef="StartEventRequest" targetRef="AdHocSubProcessRequest" /><bpmn2:adHocSubProcess id="AdHocSubProcessRequest" ordering="Sequential"><bpmn2:incoming>Flow_0540sk2</bpmn2:incoming><bpmn2:outgoing>Flow_1mnxvms</bpmn2:outgoing><bpmn2:subProcess id="PickupActivity" name="Pickup shipment"><bpmn2:extensionElements><bpmnos:status><bpmnos:restrictions><bpmnos:restriction id="Restriction_1tq1uu7" scope="entry"><bpmnos:parameter name="linear" value="load &#60;= capacity" /></bpmnos:restriction></bpmnos:restrictions><bpmnos:operators><bpmnos:operator id="Operator_0kdfcdu" attribute="load" type="expression"><bpmnos:parameter name="linear" value="load + quantity" /></bpmnos:operator></bpmnos:operators></bpmnos:status></bpmn2:extensionElements><bpmn2:outgoing>Flow_0eyclrn</bpmn2:outgoing><bpmn2:startEvent id="StartEventPickup"><bpmn2:outgoing>Flow_1vuek57</bpmn2:outgoing></bpmn2:startEvent><bpmn2:task id="PickupTrip" name="Drive to pickup location"><bpmn2:extensionElements><bpmnos:status><bpmnos:attributes><bpmnos:attribute id="PickupTripCosts" name="costs" type="decimal" /><bpmnos:attribute id="PickupTripDuration" name="duration" type="decimal" /></bpmnos:attributes><bpmnos:operators><bpmnos:operator id="Operator_PickupTripDuration" attribute="duration" type="lookup"><bpmnos:parameter name="source" value="file" /><bpmnos:parameter name="filename" value="durations.csv" /><bpmnos:parameter name="key" value="Duration" /><bpmnos:parameter name="From" attribute="location" /><bpmnos:parameter name="To" attribute="pickup_location" /></bpmnos:operator><bpmnos:operator id="Operator_PickupTripCosts" attribute="costs" type="lookup"><bpmnos:parameter name="source" value="file" /><bpmnos:parameter name="filename" value="costs.csv" /><bpmnos:parameter name="key" value="Costs" /><bpmnos:parameter name="From" attribute="location" /><bpmnos:parameter name="To" attribute="pickup_location" /></bpmnos:operator><bpmnos:operator id="Operator_1gtrgqi" attribute="timestamp" type="expression"><bpmnos:parameter name="linear" value="timestamp + duration" /></bpmnos:operator><bpmnos:operator id="Operator_2prbur9" attribute="accumulated_costs" type="expression"><bpmnos:parameter name="generic" value="accumulated_costs + costs + late_pickup_penalty * max(0, timestamp - latest_pickup)" /></bpmnos:operator><bpmnos:operator id="Operator_139nh6c" attribute="location" type="assign"><bpmnos:parameter name="assign" attribute="pickup_location" /></bpmnos:operator></bpmnos:operators></bpmnos:status></bpmn2:extensionElements><bpmn2:incoming>Flow_1vuek57</bpmn2:incoming><bpmn2:outgoing>Flow_0218acl</bpmn2:outgoing></bpmn2:task><bpmn2:intermediateThrowEvent id="ThrowPickupArrival" name="Arrival at&#10;pickup location"><bpmn2:extensionElements><bpmnos:message name="Arrival"><bpmnos:parameter name="recipient" attribute="customer" /></bpmnos:message></bpmn2:extensionElements><bpmn2:incoming>Flow_0218acl</bpmn2:incoming><bpmn2:outgoing>Flow_1ww9lrv</bpmn2:outgoing><bpmn2:messageEventDefinition id="MessageEventDefinition_0yvi8nm" /></bpmn2:intermediateThrowEvent><bpmn2:sequenceFlow id="Flow_0218acl" sourceRef="PickupTrip" targetRef="ThrowPickupArrival" /><bpmn2:sequenceFlow id="Flow_1vuek57" sourceRef="StartEventPickup" targetRef="PickupTrip" /><bpmn2:sequenceFlow id="Flow_1ww9lrv" sourceRef="ThrowPickupArrival" targetRef="CatchShipmentLoaded" /><bpmn2:intermediateCatchEvent id="CatchShipmentLoaded" name="Shipment&#10;loaded"><bpmn2:extensionElements><bpmnos:message name="Loaded"><bpmnos:parameter name="sender" attribute="customer" /></bpmnos:message></bpmn2:extensionElements><bpmn2:incoming>Flow_1ww9lrv</bpmn2:incoming><bpmn2:outgoing>Flow_0nz17s5</bpmn2:outgoing><bpmn2:messageEventDefinition id="MessageEventDefinition_145uhga" /></bpmn2:intermediateCatchEvent><bpmn2:endEvent id="EndEventPickup"><bpmn2:incoming>Flow_0nz17s5</bpmn2:incoming></bpmn2:endEvent><bpmn2:sequenceFlow id="Flow_0nz17s5" sourceRef="CatchShipmentLoaded" targetRef="EndEventPickup" /></bpmn2:subProcess><bpmn2:subProcess id="DeliveryActivity" name="Deliver shipment"><bpmn2:extensionElements><bpmnos:status><bpmnos:operators><bpmnos:operator id="Operator_04hg0q0" attribute="pending" type="expression"><bpmnos:parameter name="linear" value="pending - 1" /></bpmnos:operator><bpmnos:operator id="Operator_3ktddv3" attribute="load" type="expression"><bpmnos:parameter name="linear" value="load - quantity" /></bpmnos:operator></bpmnos:operators></bpmnos:status></bpmn2:extensionElements><bpmn2:incoming>Flow_0eyclrn</bpmn2:incoming><bpmn2:startEvent id="StartEventDelivery"><bpmn2:outgoing>Flow_0f5ozf4</bpmn2:outgoing></bpmn2:startEvent><bpmn2:task id="DeliveryTrip" name="Drive to delivery location"><bpmn2:extensionElements><bpmnos:status><bpmnos:attributes><bpmnos:attribute id="DeliveryTripCosts" name="costs" type="decimal" /><bpmnos:attribute id="DeliveryTripDuration" name="duration" type="decimal" /></bpmnos:attributes><bpmnos:operators><bpmnos:operator id="Operator_DeliveryTripDuration" attribute="duration" type="lookup"><bpmnos:parameter name="source" value="file" /><bpmnos:parameter name="filename" value="durations.csv" /><bpmnos:parameter name="key" value="Duration" /><bpmnos:parameter name="From" attribute="location" /><bpmnos:parameter name="To" attribute="delivery_location" /></bpmnos:operator><bpmnos:operator id="Operator_DeliveryTripCosts" attribute="costs" type="lookup"><bpmnos:parameter name="source" value="file" /><bpmnos:parameter name="filename" value="costs.csv" /><bpmnos:parameter name="key" value="Costs" /><bpmnos:parameter name="From" attribute="location" /><bpmnos:parameter name="To" attribute="delivery_location" /></bpmnos:operator><bpmnos:operator id="Operator_3p8q2m9" attribute="timestamp" type="expression"><bpmnos:parameter name="linear" value="timestamp + duration" /></bpmnos:operator><bpmnos:operator id="Operator_1u25i5m" attribute="accumulated_costs" type="expression"><bpmnos:parameter name="generic" value="accumulated_costs + costs + late_delivery_penalty * max(0, timestamp - latest_delivery)" /></bpmnos:operator><bpmnos:operator id="Operator_0vf75u3" attribute="location" type="assign"><bpmnos:parameter name="assign" attribute="delivery_location" /></bpmnos:operator></bpmnos:operators></bpmnos:status></bpmn2:extensionElements><bpmn2:incoming>Flow_0f5ozf4</bpmn2:incoming><bpmn2:outgoing>Flow_0u1tkkf</bpmn2:outgoing></bpmn2:task><bpmn2:intermediateThrowEvent id="CatchArrival" name="Arrival at&#10;delivery location"><bpmn2:extensionElements><bpmnos:message name="Arrival"><bpmnos:parameter name="recipient" attribute="customer" /></bpmnos:message></bpmn2:extensionElements><bpmn2:incoming>Flow_0u1tkkf</bpmn2:incoming><bpmn2:outgoing>Flow_15hrqrp</bpmn2:outgoing><bpmn2:messageEventDefinition id="MessageEventDefinition_1kx5w0r" /></bpmn2:intermediateThrowEvent><bpmn2:intermediateCatchEvent id="CatchShipmentUnloaded" name="Shipment&#10;unloaded"><bpmn2:extensionElements><bpmnos:message name="Unloaded"><bpmnos:parameter name="sender" attribute="customer" /></bpmnos:message></bpmn2:extensionElements><bpmn2:incoming>Flow_15hrqrp</bpmn2:incoming><bpmn2:outgoing>Flow_1er7c0n</bpmn2:outgoing><bpmn2:messageEventDefinition id="MessageEventDefinition_1ytjprm" /></bpmn2:intermediateCatchEvent><bpmn2:endEvent id="EndEventDelivery"><bpmn2:incoming>Flow_1er7c0n</bpmn2:incoming></bpmn2:endEvent><bpmn2:sequenceFlow id="Flow_0f5ozf4" sourceRef="StartEventDelivery" targetRef="DeliveryTrip" /><bpmn2:sequenceFlow id="Flow_0u1tkkf" sourceRef="DeliveryTrip" targetRef="CatchArrival" /><bpmn2:sequenceFlow id="Flow_15hrqrp" sourceRef="CatchArrival" targetRef="CatchShipmentUnloaded" /><bpmn2:sequenceFlow id="Flow_1er7c0n" sourceRef="CatchShipmentUnloaded" targetRef="EndEventDelivery" /></bpmn2:subProcess><bpmn2:sequenceFlow id="Flow_0eyclrn" sourceRef="PickupActivity" targetRef="DeliveryActivity" /></bpmn2:adHocSubProcess><bpmn2:endEvent id="EndEventRequest"><bpmn2:incoming>Flow_1mnxvms</bpmn2:incoming></bpmn2:endEvent><bpmn2:sequenceFlow id="Flow_1mnxvms" sourceRef="AdHocSubProcessRequest" targetRef="EndEventRequest" /></bpmn2:subProcess><bpmn2:endEvent id="EndEventVehicle"><bpmn2:incoming>Flow_1n58355</bpmn2:incoming></bpmn2:endEvent><bpmn2:dataObjectReference id="DataObjectReference_0tut0wl" dataObjectRef="DataObject_13lokie" /><bpmn2:dataObject id="DataObject_13lokie"><bpmn2:extensionElements><bpmnos:attributes><bpmnos:attribute id="Location" name="location" type="string" /><bpmnos:attribute id="Load" name="load" type="decimal" value="0" /><bpmnos:attribute id="AccumulatedCosts" name="accumulated_costs" type="decimal" value="0" objective="minimize" weight="1" /><bpmnos:attribute id="Capacity" name="capacity" type="decimal" /><bpmnos:attribute id="EarliestAvailability" name="earliest_availability" type="decimal" /><bpmnos:attribute id="LatestAvailability" name="latest_availability" type="decimal" /><bpmnos:attribute id="OvertimePenalty" name="overtime_penalty" type="decimal" value="0" objective="none" /><bpmnos:attribute id="Depot" name="depot" type="string" /><bpmnos:attribute id="Pending" name="pending" type="integer" value="0" /></bpmnos:attributes></bpmn2:extensionElements></bpmn2:dataObject><bpmn2:startEvent id="StartEventVehicle"><bpmn2:outgoing>Flow_0adioub</bpmn2:outgoing></bpmn2:startEvent><bpmn2:adHocSubProcess id="Activity_03cfvja" ordering="Sequential"><bpmn2:incoming>Flow_0adioub</bpmn2:incoming><bpmn2:outgoing>Flow_1n58355</bpmn2:outgoing><bpmn2:task id="ReturnTrip" name="Return to depot"><bpmn2:extensionElements><bpmnos:status><bpmnos:attributes><bpmnos:attribute id="ReturnTripCosts" name="costs" type="decimal" /><bpmnos:attribute id="ReturnTripDuration" name="duration" type="decimal" /></bpmnos:attributes><bpmnos:restrictions><bpmnos:restriction id="Restriction_3kah7s3" scope="entry"><bpmnos:parameter name="linear" value="pending == 0" /></bpmnos:restriction><bpmnos:restriction id="Restriction_1hjnnka" scope="entry"><bpmnos:parameter name="linear" value="requests_made == requests_expected" /></bpmnos:restriction></bpmnos:restrictions><bpmnos:operators><bpmnos:operator id="Operator_ReturnTripDuration" attribute="duration" type="lookup"><bpmnos:parameter name="source" value="file" /><bpmnos:parameter name="filename" value="durations.csv" /><bpmnos:parameter name="key" value="Duration" /><bpmnos:parameter name="From" attribute="location" /><bpmnos:parameter name="To" attribute="depot" /></bpmnos:operator><bpmnos:operator id="Operator_ReturnTripCosts" attribute="costs" type="lookup"><bpmnos:parameter name="source" value="file" /><bpmnos:parameter name="filename" value="costs.csv" /><bpmnos:parameter name="key" value="Costs" /><bpmnos:parameter name="From" attribute="location" /><bpmnos:parameter name="To" attribute="depot" /></bpmnos:operator><bpmnos:operator id="Operator_3fddcqg" attribute="timestamp" type="expression"><bpmnos:parameter name="linear" value="timestamp + duration" /></bpmnos:operator><bpmnos:operator id="Operator_22uvufq" attribute="accumulated_costs" type="expression"><bpmnos:parameter name="generic" value="accumulated_costs + costs + overtime_penalty * max(0, timestamp - latest_availability)" /></bpmnos:operator><bpmnos:operator id="Operator_0q6fg6j" attribute="location" type="assign"><bpmnos:parameter name="assign" attribute="depot" /></bpmnos:operator></bpmnos:operators></bpmnos:status></bpmn2:extensionElements></bpmn2:task></bpmn2:adHocSubProcess><bpmn2:sequenceFlow id="Flow_1n58355" sourceRef="Activity_03cfvja" targetRef="EndEventVehicle" /><bpmn2:sequenceFlow id="Flow_0adioub" sourceRef="StartEventVehicle" targetRef="Activity_03cfvja" /><bpmn2:performer name="Sequential" /></bpmn2:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="PickupDeliveryProblem"><bpmndi:BPMNShape id="Participant_0es96as_di" bpmnElement="Participant_0es96as" isHorizontal="true"><dc:Bounds x="430" y="1024" width="1320" height="200" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEventCustomer"><dc:Bounds x="502" y="1101" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_03uhk41_di" bpmnElement="RequestActivity"><dc:Bounds x="590" y="1079" width="100" height="80" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1q3fyzy_di" bpmnElement="CatchPickupArrival"><dc:Bounds x="752" y="1101" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="735" y="1144" width="73" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1s2bi1l_di" bpmnElement="PickupWaitEvent"><dc:Bounds x="852" y="1101" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="852" y="1144" width="37" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_10zl3oq_di" bpmnElement="LoadActivity"><dc:Bounds x="950" y="1079" width="100" height="80" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1rl0u2o_di" bpmnElement="ThrowShipmentLoaded"><dc:Bounds x="1112" y="1101" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="1107" y="1144" width="47" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0xm3v5r_di" bpmnElement="CatchDestinationArrival"><dc:Bounds x="1212" y="1101" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="1191" y="1144" width="79" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1bjq1ce_di" bpmnElement="DeliveryWaitEvent"><dc:Bounds x="1312" y="1101" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="1311" y="1144" width="38" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0skj9pc_di" bpmnElement="UnloadActivity"><dc:Bounds x="1410" y="1079" width="100" height="80" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1tbds7e_di" bpmnElement="ThrowShipmentUnloaded"><dc:Bounds x="1572" y="1101" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="1567" y="1144" width="47" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0xay641_di" bpmnElement="EndEventCustomer"><dc:Bounds x="1662" y="1101" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_03kr6t6_di" bpmnElement="Flow_03kr6t6"><di:waypoint x="538" y="1119" /><di:waypoint x="590" y="1119" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0t8rjvh_di" bpmnElement="Flow_0t8rjvh"><di:waypoint x="690" y="1119" /><di:waypoint x="752" y="1119" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1jr4jt5_di" bpmnElement="Flow_1jr4jt5"><di:waypoint x="788" y="1119" /><di:waypoint x="852" y="1119" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xlu6cs_di" bpmnElement="Flow_1xlu6cs"><di:waypoint x="888" y="1119" /><di:waypoint x="950" y="1119" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ipskfi_di" bpmnElement="Flow_1ipskfi"><di:waypoint x="1050" y="1119" /><di:waypoint x="1112" y="1119" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cgpzkv_di" bpmnElement="Flow_0cgpzkv"><di:waypoint x="1148" y="1119" /><di:waypoint x="1212" y="1119" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01onh2q_di" bpmnElement="Flow_01onh2q"><di:waypoint x="1248" y="1119" /><di:waypoint x="1312" y="1119" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1dvo3vz_di" bpmnElement="Flow_1dvo3vz"><di:waypoint x="1348" y="1119" /><di:waypoint x="1410" y="1119" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1pp5drc_di" bpmnElement="Flow_1pp5drc"><di:waypoint x="1510" y="1119" /><di:waypoint x="1572" y="1119" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0t063eo_di" bpmnElement="Flow_0t063eo"><di:waypoint x="1608" y="1119" /><di:waypoint x="1662" y="1119" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Participant_0cq61mf_di" bpmnElement="Participant_0cq61mf" isHorizontal="true"><dc:Bounds x="430" y="440" width="1320" height="553" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1rumwd1_di" bpmnElement="EventSubProcess" isExpanded="true"><dc:Bounds x="480" y="643" width="1240" height="320" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_13m1nmn_di" bpmnElement="StartEventRequest"><dc:Bounds x="504" y="786" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="502" y="762" width="41" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0fd58be_di" bpmnElement="AdHocSubProcessRequest" isExpanded="true"><dc:Bounds x="580" y="673" width="1030" height="260" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_12nie71_di" bpmnElement="PickupActivity" isExpanded="true"><dc:Bounds x="610" y="703" width="460" height="200" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0h8snsy_di" bpmnElement="StartEventPickup"><dc:Bounds x="630" y="785" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_00g0cj2_di" bpmnElement="PickupTrip"><dc:Bounds x="700" y="763" width="100" height="80" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1cnrv99_di" bpmnElement="ThrowPickupArrival"><dc:Bounds x="842" y="785" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="824" y="749" width="73" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1qplq7o_di" bpmnElement="CatchShipmentLoaded"><dc:Bounds x="922" y="785" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="917" y="748" width="47" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1x2fsws_di" bpmnElement="EndEventPickup"><dc:Bounds x="1002" y="785" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_0218acl_di" bpmnElement="Flow_0218acl"><di:waypoint x="800" y="803" /><di:waypoint x="842" y="803" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1vuek57_di" bpmnElement="Flow_1vuek57"><di:waypoint x="666" y="803" /><di:waypoint x="700" y="803" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ww9lrv_di" bpmnElement="Flow_1ww9lrv"><di:waypoint x="878" y="803" /><di:waypoint x="922" y="803" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0nz17s5_di" bpmnElement="Flow_0nz17s5"><di:waypoint x="958" y="803" /><di:waypoint x="1002" y="803" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="BPMNShape_0frhef4" bpmnElement="DeliveryActivity" isExpanded="true"><dc:Bounds x="1120" y="703" width="460" height="200" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="BPMNShape_00qe2i3" bpmnElement="StartEventDelivery"><dc:Bounds x="1140" y="785" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="BPMNShape_0v4vg7i" bpmnElement="DeliveryTrip"><dc:Bounds x="1210" y="763" width="100" height="80" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNShape id="BPMNShape_12tebbi" bpmnElement="CatchArrival"><dc:Bounds x="1352" y="785" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="1331" y="749" width="79" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="BPMNShape_0ma6ws3" bpmnElement="CatchShipmentUnloaded"><dc:Bounds x="1432" y="785" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="1427" y="748" width="47" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="BPMNShape_1bzjphi" bpmnElement="EndEventDelivery"><dc:Bounds x="1512" y="785" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="BPMNEdge_1huxrzw" bpmnElement="Flow_0f5ozf4"><di:waypoint x="1176" y="803" /><di:waypoint x="1210" y="803" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="BPMNEdge_05uixls" bpmnElement="Flow_0u1tkkf"><di:waypoint x="1310" y="803" /><di:waypoint x="1352" y="803" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="BPMNEdge_08vl09w" bpmnElement="Flow_15hrqrp"><di:waypoint x="1388" y="803" /><di:waypoint x="1432" y="803" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="BPMNEdge_1ldufk1" bpmnElement="Flow_1er7c0n"><di:waypoint x="1468" y="803" /><di:waypoint x="1512" y="803" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0eyclrn_di" bpmnElement="Flow_0eyclrn"><di:waypoint x="1070" y="803" /><di:waypoint x="1120" y="803" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_0xn722g_di" bpmnElement="EndEventRequest"><dc:Bounds x="1652" y="790" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_0540sk2_di" bpmnElement="Flow_0540sk2"><di:waypoint x="540" y="804" /><di:waypoint x="580" y="804" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mnxvms_di" bpmnElement="Flow_1mnxvms"><di:waypoint x="1610" y="808" /><di:waypoint x="1652" y="808" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_140j3fr_di" bpmnElement="EndEventVehicle"><dc:Bounds x="972" y="521" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DataObjectReference_0tut0wl_di" bpmnElement="DataObjectReference_0tut0wl"><dc:Bounds x="502" y="514" width="36" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0xvgio3_di" bpmnElement="StartEventVehicle"><dc:Bounds x="590" y="521" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0r881u9_di" bpmnElement="Activity_03cfvja" isExpanded="true"><dc:Bounds x="700" y="464" width="190" height="150" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="BPMNShape_00prag2" bpmnElement="ReturnTrip"><dc:Bounds x="744" y="490" width="100" height="80" /><bpmndi:BPMNLabel /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_1n58355_di" bpmnElement="Flow_1n58355"><di:waypoint x="890" y="539" /><di:waypoint x="972" y="539" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0adioub_di" bpmnElement="Flow_0adioub"><di:waypoint x="626" y="539" /><di:waypoint x="700" y="539" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xqd4id_di" bpmnElement="Flow_1xqd4id"><di:waypoint x="640" y="1079" /><di:waypoint x="640" y="1010" /><di:waypoint x="522" y="1010" /><di:waypoint x="522" y="822" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0jhyplx_di" bpmnElement="Flow_0jhyplx"><di:waypoint x="860" y="821" /><di:waypoint x="860" y="1010" /><di:waypoint x="770" y="1010" /><di:waypoint x="770" y="1101" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0et0fj0_di" bpmnElement="Flow_0et0fj0"><di:waypoint x="1130" y="1101" /><di:waypoint x="1130" y="1010" /><di:waypoint x="940" y="1010" /><di:waypoint x="940" y="821" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_17g8ymw_di" bpmnElement="Flow_17g8ymw"><di:waypoint x="1370" y="821" /><di:waypoint x="1370" y="1010" /><di:waypoint x="1230" y="1010" /><di:waypoint x="1230" y="1101" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vyg7d2_di" bpmnElement="Flow_0vyg7d2"><di:waypoint x="1590" y="1101" /><di:waypoint x="1590" y="1010" /><di:waypoint x="1450" y="1010" /><di:waypoint x="1450" y="821" /></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn2:definitions>